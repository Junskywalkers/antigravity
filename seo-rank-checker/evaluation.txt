

# ✅ **結論：サーバー負荷リスクは「中程度」。改善余地あり**

あなたのコードは Playwright を使って SEOチェキ（`seocheki.net`）に複数キーワードについて順番にアクセスし、順位を取得する仕組みです。以下の点でサーバーに負荷をかける可能性があります。

---

# 🔍 **問題点：負荷がかかる可能性がある箇所**

## **① 同じサイトにアクセスする間隔が短い（5〜15秒）**

* 現状では 5〜15秒のランダム待機ですが、SEOチェキのような無料診断系サイトは、
  **高負荷アクセスや自動ツールを嫌う傾向**が強く、短すぎます。
* 1キーワードあたり複数の要素を取得するため、内部的には複数 HTTP リクエストが発生します。

▶ **危険性**

* 同一IPから短時間に連続アクセスすると、**アクセス制限やBAN**の可能性あり。

---

## **② CHUNK_SIZE=3 の意味によっては並列化の可能性**

コードの全体が見えていませんが、`CHUNK_SIZE = 3` が

* 「3件ずつ並列アクセス」
* または 1ブラウザ内で多タブ同時アクセス

を意味する場合、SEOチェキ側に **3倍の負荷**を与えます。

---

## **③ SEOチェキはスクレイピングを基本的に禁止している**

SEOチェキは利用規約で botアクセスを制限しています。
（※一般にこの種の無料計測サービスは、非公式APIやbotの使用を禁止します）

▶ **危険性**

* 法的リスクというより、サービス提供者から IP ブロックされる可能性が高い。

---

## **④ User-Agent が固定**

User-Agent が固定になっているため、自動アクセスが検知されやすく負荷対策の標的になります。

---

# 🛠 **改善案（推奨順）**

---

## **改善①：アクセス間隔を大幅に伸ばす（15〜60秒）**

特に無料ツールでは高アクセスは嫌われるため、

```
random.uniform(20, 60)
```

程度に伸ばすべき。

### 理由

* サーバー保護
* BAN リスク低下
* 一般的なスクレイピングマナー

---

## **改善②：CHUNK_SIZE を 1 にする（完全に直列処理）**

並列アクセスは避けるべき。

```
CHUNK_SIZE = 1
```

---

## **改善③：User-Agent をローテーション**

固定よりもランダムの方が自然。
例：

```python
USER_AGENTS = [
    "Mozilla/5.0 ... Safari/537.36",
    "Mozilla/5.0 ... Firefox/121.0",
    "Mozilla/5.0 ... Edge/120.0"
]
USER_AGENT = random.choice(USER_AGENTS)
```

---

## **改善④：リトライ時に指数バックオフ**

連続でエラーが出た場合はアクセス間隔を倍増させる。

---

## **改善⑤：SEOチェキ以外の“公式API”があるサービスに切り替える**

Google検索順位の取得は、本来 API 連携を使う方が正しい方法です。

**代替案：**

* Google Search Console API
* SerpAPI（有料・最適）
* DataForSEO（有料・業務向け）

---

## **改善⑥：robots.txt の確認と尊重**

SEOチェキは一般的に BOT を拒否しています。
これを無視すると倫理的にも良くないため、可能なら利用を避けましょう。

---

# 🎯 **まとめ**

あなたのスクリプトは *致命的な攻撃* ではありませんが、
**無料提供サイトへの自動連続アクセスとしては負荷とリスクが高い設定**です。

---

# 🔒 **最小限守るべきポイント（推奨）**

* 1アクセス **20〜60秒間隔**
* 完全な **直列処理（CHUNK_SIZE=1）**
* User-Agent ローテーション
* エラーバックオフ実装
* 一般的には「順位取得API」を使う方向へ移行

---